<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ECharts</title>
  <!-- 引入 echarts.js -->
  <script src="../../../../node_modules/echarts/dist/echarts.min.js"></script>
  <script src="../../../../node_modules/echarts/dist/extension/bmap.min.js"></script>
  <script src="../../../../node_modules/echarts/map/js/china.js"></script>
  <script src="./theme.js"></script>


</head>
<body>
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="main" style="width: 1200px;height:700px;"></div>
<script type="text/javascript">
  // 基于准备好的dom，初始化echarts实例
  var myChart = echarts.init(document.getElementById('main'), 'macarons');

  var nodenames = ['柜台', 'ATMC', 'POSC', '电话银行客户端', '理财',     // 0,1,2,3,4
                  '图形前端', '柜面前置', '公共前置', '金融IC卡', '核心',  // 5,6,7,8,9
                  'ATMP', 'POSP', '电话银行网关', '理财17777', '理财WEB', //10,11,12,13,14
                  'ATMP代缴费', 'ATMP2ESB', 'POSP-ESB', '电话银行2渠道ESB', '理财2渠道ESB', //15,16,17,18,19
                  '密服平台', '银联', '人行国库', '支付宝', '煤气GAS' //20,21,22,23,24
  ];
  var nodes = []

  for (var i=0; i<nodenames.length; i++){
      nodes.push({'name': nodenames[i]})
  }

  var linkpairs = [ [0, 5, 5], [5, 7, 10], [6, 7, 10], [7, 8, 2], [7, 9, 18], [6, 9, 8],
                    [1, 10, 10], [2, 11, 20], [3, 12, 7], [4, 13, 3], [4, 14, 6],
                    [15, 9, 6], [16, 9, 4], [17, 9, 19], [18, 9, 7], [19, 9, 3],
                    [15, 20, 4], [16, 20, 2], [17, 20, 1], [10, 15, 4], [10, 16, 6],
                    [11, 17, 20], [12, 18, 7], [13, 19, 3], [7, 21, 10], [7, 22, 3], [7, 23, 16], [7, 24, 2]
  ]
  var links = []

  for (var j=0; j<linkpairs.length; j++){
      links.push({"source": nodes[linkpairs[j][0]]['name'], "target": nodes[linkpairs[j][1]]['name'], "value":linkpairs[j][2]})
  }

  option = {
    backgroundColor: '#1f2227',
    color: [
      //"#1F78C1","#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#BA43A9","#705DA0", //1
      //"#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477", //2
     // "#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0", //3
      "#629E51","#64B0C8","#E0752D","#0A50A1","#962D82","#614D93", "#447EBC", "#1F78C1","#7EB26D","#EAB839","#6ED0E0","#EA6460"//4
      //"#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7", //5
      //"#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B", //6
      //"#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"  //7
    ],
    layoutIterations: 100,
    tooltip: {
      trigger: 'item',
      triggerOn: 'mousemove'

    },

    series: [
      {
        type: 'sankey',
        layout:'none',
        data: nodes,
        links: links,
        label: {
          normal: {
            textStyle: {
              color: '#fff',
              fontSize: 10
            },
          }
        },
        itemStyle: {
          normal: {
            textStyle: {
              color: '#fff',
              fontSize: 20
            },
            borderWidth: 0,
          }
        },
        lineStyle: {
          normal: {
            color: 'source',
            curveness: 0.5,
            opacity: 0.7,
          }
        }
      }
    ]
  }

  // 使用刚指定的配置项和数据显示图表。
  myChart.setOption(option);
</script>
</body>
</html>
