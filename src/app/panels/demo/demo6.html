<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ECharts</title>
  <!-- 引入 echarts.js -->
  <script src="../../../../node_modules/echarts/dist/echarts.min.js"></script>
  <script src="../../../../node_modules/echarts/dist/extension/bmap.min.js"></script>
  <script src="../../../../node_modules/echarts/map/js/china.js"></script>
  <script src="./theme.js"></script>


</head>
<body>
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="main" style="width: 1200px;height:300px;"></div>
<script type="text/javascript">
  // 基于准备好的dom，初始化echarts实例
  var myChart = echarts.init(document.getElementById('main'), 'dark');

  var dataMap = {};
  function dataFormatter(obj) {
    var pList = ['北京','天津','河北','山西','内蒙古','辽宁','吉林','黑龙江','上海','江苏','浙江','安徽','福建','江西','山东','河南','湖北','湖南','广东','广西','海南','重庆','四川','贵州','云南','西藏','陕西','甘肃','青海','宁夏','新疆'];
    var temp;
    for (var year =   2013; year <= 2017; year++) {
      var max = 0;
      var sum = 0;
      temp = obj[year];
      for (var i = 0, l = temp.length; i < l; i++) {
        max = Math.max(max, temp[i]);
        sum += temp[i];
        obj[year][i] = {
          name : pList[i],
          value : temp[i]
        }
      }
      obj[year + 'max'] = Math.floor(max / 100) * 100;
      obj[year + 'sum'] = sum;
    }
    return obj;
  }




  dataMap.dataSI = dataFormatter({
    //max : 25000,
    2013:[2191.43,2457.08,6110.43,2755.66,2374.96,4566.83,1915.29,3365.31,4969.95,12282.89,8511.51,2711.18,3695.04,2419.74,12574.03,6724.61,3365.08,3187.05,13469.77,1878.56,308.62,1871.65,3775.14,967.54,1705.83,80.1,2452.44,1043.19,331.91,351.58,1459.3],
    2014:[2026.51,2135.07,5271.57,2357.04,1773.21,3869.4,1580.83,2971.68,4381.2,10524.96,7164.75,2245.9,3175.92,1917.47,10478.62,5514.14,2852.12,2612.57,11356.6,1510.68,240.83,1564,3067.23,821.16,1426.42,63.52,1951.36,838.56,264.61,281.05,1164.79],
    2015:[1853.58,1685.93,4301.73,1919.4,1248.27,3061.62,1329.68,2487.04,3892.12,8437.99,6250.38,1844.9,2770.49,1566.4,8478.69,4182.1,2320.6,2190.54,9280.73,1253.7,205.6,1376.91,2489.4,681.5,1281.63,52.74,1553.1,713.3,211.7,244.05,914.47],
    2016:[1487.15,1337.31,3417.56,1463.38,967.49,2898.89,1098.37,2084.7,3209.02,6787.11,5096.38,1535.29,2340.82,1204.33,6485.05,3310.14,1956.02,1777.74,7592.78,984.08,175.82,1135.31,2014.8,569.37,1047.66,47.64,1221.17,572.02,171.92,194.27,719.54],
    2017:[1249.99,1069.08,2911.69,1134.31,754.78,2609.85,943.49,1843.6,2622.45,5604.49,4090.48,1337.04,2036.97,941.77,5184.98,2768.75,1709.89,1523.5,6143.4,846.89,148.88,958.87,1733.38,481.96,934.88,32.72,1007.56,501.69,144.51,153.06,603.15]
  });

  dataMap.dataTI = dataFormatter({
    //max : 30000,
    2012:[7236.15,2250.04,4600.72,2257.99,2467.41,4486.74,2025.44,2493.04,6821.11,9730.91,7613.46,2789.78,3770,1918.95,8620.24,4511.97,3812.34,3835.4,14076.83,2156.76,528.84,1825.21,3881.6,1312.94,1896.78,188.06,2178.2,1037.11,294.91,366.18,1246.89],
    2013:[5837.55,1902.31,3895.36,1846.18,1934.35,3798.26,1687.07,2096.35,5508.48,7914.11,6281.86,2390.29,3022.83,1614.65,7187.26,3721.44,3111.98,3229.42,11585.82,1835.12,433.57,1649.2,3319.62,989.38,1557.91,159.76,1806.36,900.16,249.04,294.78,1058.16],
    2014:[4854.33,1658.19,3340.54,1611.07,1542.26,3295.45,1413.83,1857.42,4776.2,6612.22,5360.1,2137.77,2551.41,1411.92,5924.74,3181.27,2655.94,2882.88,9772.5,1560.92,377.17,1440.32,2836.73,815.32,1374.62,137.24,1546.59,787.36,213.37,259.49,929.41],
    2015:[4092.27,1319.76,2805.47,1375.67,1270,2811.95,1223.64,1657.77,4097.26,5198.03,4584.22,1963.9,2206.02,1225.8,4764.7,2722.4,2292.55,2428.95,8335.3,1361.92,335.3,1229.62,2510.3,661.8,1192.53,123.3,1234.6,688.41,193.7,227.73,833.36],
    2016:[3435.95,1150.81,2439.68,1176.65,1000.79,2487.85,1075.48,1467.9,3404.19,4493.31,3890.79,1638.42,1949.91,1043.08,4112.43,2358.86,  2015.08,1995.78,7178.94,1178.25,293.85,1081.35,2189.68,558.28,1013.76,96.76,1063.89,589.91,169.81,195.46,753.91],
    2017:[2982.57,997.47,2149.75,992.69,811.47,2258.17,958.88,1319.4,3038.9,3891.92,3227.99,1399.02,1765.8,972.73,3700.52,1978.37,1795.93,1780.79,6343.94,1074.85,270.96,956.12,1943.68,480.37,914.5,89.56,963.62,514.83,148.83,171.14,704.5]
  });


  var option = {

    baseOption: {
      timeline: {
        // y: 0,
        axisType: 'category',
        // realtime: false,
        // loop: false,
        // currentIndex: 2,
        playInterval: 1000,
        // controlStyle: {
        //     position: 'left'
        // },
        data: [
          '2016第一季度', '2016第二季度','2016第三季度','2016第四季度','2017第一季度',
        ],
      },
      color: [
        "#1F78C1","#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#BA43A9","#705DA0", //1
        "#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477", //2
        "#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0", //3
        "#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93", //4
        "#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7", //5
        "#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B", //6
        "#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"  //7
      ],
      legend: {
        x: 'right',
        data: ['贷款', '存款'],
        selected: {
          '贷款':true, '存款':true
        }
      },
      grid: {
        top: 50,
        bottom: 100,
        left: 70,
        right:40,
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: '',
            label: {
              show: true,
              formatter: function (params) {
                return params.value.replace('\n', '');
              }
            }
          }
        }
      },
      xAxis: [
        {
          'type':'category',
          'axisLabel':{'interval':0},
          'data':[
            '北京','\n天津','河北','\n山西','内蒙古','\n辽宁','吉林','\n黑龙江',
            '上海','\n江苏','浙江','\n安徽','福建','\n江西','山东','\n河南',
            '湖北','\n湖南','广东','\n广西','海南','\n重庆','四川','\n贵州',
            '云南','\n西藏','陕西','\n甘肃','青海','\n宁夏','新疆'
          ],
          splitLine: {show: false}
        }
      ],
      yAxis: [
        {
          type: 'value',
          name: '存贷款（万元）'
        }
      ],
      series: [

        {name: '贷款', type: 'bar'},
        {name: '存款', type: 'bar'},
        {
          name: 'GDP占比',
          type: 'pie',
          center: ['85%', '35%'],
          radius: '28%',
          z: 10
        }
      ]
    },
    options: [

      {
        title : {text: ''},
        series : [

          {data: dataMap.dataSI['2013']},
          {data: dataMap.dataTI['2013']},
          {data: [

            {name: '贷款', value: dataMap.dataSI['2013sum']},
            {name: '存款', value: dataMap.dataTI['2013sum']}
          ]}
        ]
      },
      {
        title : {text: ''},
        series : [

          {data: dataMap.dataSI['2014']},
          {data: dataMap.dataTI['2014']},
          {data: [
            {name: '贷款', value: dataMap.dataSI['2014sum']},
            {name: '存款', value: dataMap.dataTI['2014sum']}
          ]}
        ]
      },
      {
        title : {text: ''},
        series : [
          {data: dataMap.dataSI['2015']},
          {data: dataMap.dataTI['2015']},
          {data: [

            {name: '贷款', value: dataMap.dataSI['2015sum']},
            {name: '存款', value: dataMap.dataTI['2015sum']}
          ]}
        ]
      },
      {
        title : {text: ''},
        series : [

          {data: dataMap.dataSI['2016']},
          {data: dataMap.dataTI['2016']},
          {data: [

            {name: '贷款', value: dataMap.dataSI['2016sum']},
            {name: '存款', value: dataMap.dataTI['2016sum']}
          ]}
        ]
      },
      {
        title : {text: ''},
        series : [
          {data: dataMap.dataSI['2017']},
          {data: dataMap.dataTI['2017']},
          {data: [

            {name: '贷款', value: dataMap.dataSI['2017sum']},
            {name: '存款', value: dataMap.dataTI['2017sum']}
          ]}
        ]
      }
    ]
  };




  // 使用刚指定的配置项和数据显示图表。
  myChart.setOption(option);
</script>
</body>
</html>
